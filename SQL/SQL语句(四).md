---
title: SQL语句(四)
date: 2023-11-22 18:33:07
description: 这篇文章简要介绍了什么是索引，如何建立索引，建立哪种索引适合当前需求，建立索引之后又该如何管理索引以及如何删除索引
categories:
  - - 数据库系统概论
    - SQL教程
tags:
  - 索引
  - SQL语句
  - 数据字典
top_image: https://arturia-blog-1316646580.cos.ap-shanghai.myqcloud.com/ArturiaBlogPicGo/202311222116741.jpg
cover: https://arturia-blog-1316646580.cos.ap-shanghai.myqcloud.com/ArturiaBlogPicGo/202311222116741.jpg
keywords:
  - 索引的建立
  - 索引的删除
  - 唯一索引
  - 非唯一索引
  - 聚簇索引
  - 数据字典
---
# 索引的建立与删除
- 索引建立的目的：加快查询速度
	- 索引就相当于是书的目录
- 谁可以建立索引：DBA或表的属主（即建立表的人）
- DBMS一般会自动建立以下列上的索引：
	- PRIMARY KEY;
	- UNIQUE
- 谁维护索引：DBMS自动完成
- 使用索引：DBMS自动选择是否使用索引及使用哪些索引
- 概念：
	- RDBMS（关系型数据库管理系统）中索引一般采用<font color = "CC6600">「B+树」</font>、<font color = "CC6600">「HASH索引」</font>来实现
		- B+树索引具有动态平衡的优点，HASH索引具有查找速度快的特点。采用B+树还是HASH索引则由具体的RDBMS来决定
	- 索引是关系数据库内部实现技术，属于<font color = "CC6600">「内模式」</font>
	- <font color = "CC6600">「CREATE INDEX」</font>语句定义索引时，可以定义索引是<font color = "CC6600">「唯一索引」</font>、<font color = "CC6600">「非唯一索引」</font>或<font color = "CC6600">「聚簇索引」</font>
		- 唯一索引：唯一索引是确保数据表中每一行数据在某一列或列组合上是独一无二的。它对于保持数据的唯一性至关重要。如果我们在尝试插入或修改数据时导致索引列的值重复，那么DBMS就会报错，告知我们不允许这么做。而在很多系统中，PRIMARY KEY索引就是一种特殊的唯一索引，它不仅保证了唯一性还标识表中的每一行
		- 非唯一索引：非唯一索引与唯一索引不同，它不要求索引列的值是唯一的，即允许有重复的值出现。这种索引的目的是加快数据检索速度而不强调数据的唯一性。对于那些经常作为查询条件但不具备唯一性特征的字段，创建一个非唯一索引是一个非常好的选择
		- 聚簇索引：聚簇索引也被称为聚集索引，它决定了表中数据的物理存储顺序。有了聚簇索引，数据行会按照索引键值的顺序存储在磁盘上。这意味着，聚簇索引决定了数据在磁盘上的排列方式。<font color = "CC6600">「一个表中只能有一个聚簇索引」</font>，因为你不能以两种不同的方式对数据进行排序。如果没有明确指定聚簇索引，那么某些DBMS可能会默认使用主键作为聚簇索引。</br>聚簇索引对于经常按顺序查询大量数据的操作是非常有效的，因为它可以通过顺序I/O读取而不是随机I/O来提供查询性能。然而，由于聚簇索引改变了数据的物理存储，所有插入和更新操作可能导致数据重组，进而影响性能

## <font color = "886600">建立索引</font>
- 语句格式如下：
	- CREATE \[UNIQUE] \[CLUSTER] INDEX <索引名> ON <表名></br> (<列名>\[<次序>]\[,<列名>\[<次序>]]……);
- 说明：
	- UNIQUE属性：表示建立一个唯一索引，即这列上的值都是唯一的，不能重复的
	- CLUSTER属性：表示建立一个聚簇索引
	- ON表示在哪个表上建立索引
- 例：
	- 使用UNIQUE为学生-课程数据库中的Student，Course，SC三个表建立索引
		- 语句如下；
			- CREATE UNIQUE INDEX Stusno ON Student(Sno);</br>CREATE UNIQUE INDEX Coucno ON Course(Cno);</br>CREATE UNIQUE INDEX SCno ON SC(Sno.ASC,Cno.DESC) 
		- 说明：
			- Student表按学号升序建立唯一索引（默认）
			- Course表按课程号升序建立唯一索引
			- 而在SC选修表中，由于需要学生学号和课程号共同组成联合主键才能唯一确认一行元组，因此我们需要对Sno和Cno共同建立索引，其中Sno按升序排列，Cno按降序排列
- 例：
	- 使用CLUSTER为Student表的Sname列上建立一个聚簇索引
		- 语句如下：
			- CREATE CLUTER INDEX Stusname ON Student(Sname);
		- 说明：
			- 在最经常查询的列上建立聚簇索引以提高查询效率
			- 一个基本表最多只能建立一个聚簇索引
			- 经常更新的列不宜建立聚簇索引

## <font color = "886600">删除索引</font>
- 语句格式如下：
	- DROP INDEX <索引名>;
- 说明：删除索引时，系统会从<font color = "CC6600">「数据字典」</font>中删去有关该索引的描述
	- 数据字典的概念：
		- 数据字典是关系数据库管理系统内部的一组系统表（系统自动创建）
		- 数据字典记录了数据库中所有的定义信息，包括模式定义、视图定义、索引定义、完整性约束定义、各类用户对数据库的操作权限、统计信息等
		- RDBMS执行SQL数据定义时，实际就是更新数据字典
	- 小白解释：就相当于是新华字典，新华字典存储的是对每个字的拼音、解释和说明等信息，而数据字典存放的就是每个基本表、字段、索引、视图以及谁创建的做一个记录
- 例：
	- 删除Student表的Stusname索引
		- 语句格式如下：
			- DROP INDEX Stusname;